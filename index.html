<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Consulta de Iniciativas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 20px;
    }
    form {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #0078D7;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #005a9e;
    }
    .mensaje {
      text-align: center;
      background-color: #e6ffe6;
      border: 1px solid #66cc66;
      padding: 15px;
      margin-top: 20px;
      border-radius: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <form id="formulario">
    <h2>Consulta de iniciativas</h2>

    <label for="nombre">Anota tu nombre:</label>
    <input type="text" id="nombre" name="nombre" required />

    <label for="pregunta">¿Qué desea saber?</label>
    <textarea id="pregunta" name="pregunta" rows="3"></textarea>

    <label for="grupo">Grupo parlamentario:</label>
    <select id="grupo" name="grupo">
      <option value="">Todos los grupos</option>
      <option value="VOX">VOX</option>
      <option value="PP">PP</option>
      <option value="PSOE">PSOE</option>
      <option value="Más Madrid">Más Madrid</option>
      <option value="UP">Unidas Podemos</option>
      <option value="Ciudadanos">Ciudadanos</option>
    </select>

    <label for="tipo_ini">Tipo de iniciativa:</label>
    <select id="tipo_ini" name="tipo_ini">
      <option value="">Todos los tipos</option>
      <option value="PI">PI</option>
      <option value="PE">PE</option>
      <option value="C">C</option>
      <option value="M">M</option>
      <option value="I">I</option>
      <option value="PNL">PNL</option>
      <option value="PL">PL</option>
      <option value="PROPL">PROPL</option>
      <option value="PCOC">PCOC</option>
      <option value="PCOP">PCOP</option>
    </select>

    <label for="asunto">Palabras clave en el asunto <span style="font-weight: normal;">(separadas por comas)</span>:</label>
    <input type="text" id="asunto" name="asunto" />

    <label for="legislatura">Escoja la legislatura de búsqueda:</label>
    <select id="legislatura" name="legislatura">
      <option value="">Todas las legislaturas</option>
      <option value="XI">XI</option>
      <option value="XII">XII</option>
      <option value="XIII">XIII</option>
    </select>

    <button type="submit">Enviar consulta</button>
    <div class="mensaje" id="mensajeConfirmacion">✅ Su consulta ha sido enviada correctamente. Recibirá respuesta por los canales asignados.</div>
  </form>

  <script>
    document.getElementById("formulario").addEventListener("submit", async function(event) {
      event.preventDefault();
      const form = event.target;
      const data = new FormData(form);

      const response = await fetch("https://osgonsa.app.n8n.cloud/webhook/consulta_iniciativas", {
        method: "POST",
        body: data
      });

      if (response.ok) {
        document.getElementById("mensajeConfirmacion").style.display = "block";
        form.reset();
      } else {
        alert("⚠️ Hubo un error al enviar la consulta. Inténtelo más tarde.");
      }
    });
  </script>
</body>
</html>

